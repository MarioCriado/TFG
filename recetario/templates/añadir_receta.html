{% extends 'base.html' %}
{% block title %}Añadir receta{% endblock %}

{% block content %}
<h1 class="mb-4">Añadir nueva receta</h1>
<form id="form-receta" method="post"
      action="{{ url_for('main.anadir_receta') }}"
      enctype="multipart/form-data">

  <!-- Título y descripción -->
  <div class="form-group">
    <label for="titulo" class="form-label">Título</label>
    <input type="text" class="form-control" id="titulo" name="titulo"
           placeholder="Ej: Tarta de manzana" required>
  </div>
  <div class="form-group">
    <label for="descripcion" class="form-label">Descripción breve</label>
    <textarea class="form-control" id="descripcion"
              name="descripcion" rows="2"
              placeholder="Por ejemplo, un postre suave de manzana y canela"></textarea>
  </div>

  <!-- Imagen + preview -->
  <div class="form-group image-upload">
    <label for="imagen" class="upload-label">
      <svg class="upload-icon" width="20" height="20" viewBox="0 0 24 24" fill="none">
        <path d="M11.293 3.293a1 1 0 0 1 1.414 0l4 4a1 1 0 0 1-1.414 1.414L13 6.414V16a1 1 0 1 1-2 0V6.414L8.707 8.707a1 1 0 0 1-1.414-1.414l4-4Z" fill="#000"/>
        <path d="M6 17a1 1 0 1 0-2 0v.6C4 19.482 5.518 21 7.4 21h9.2c1.882 0 3.4-1.518 3.4-3.4V17a1 1 0 1 0-2 0v.6c0 .778-.622 1.4-1.4 1.4H7.4c-.778 0-1.4-.622-1.4-1.4V17Z" fill="#000"/>
      </svg>
      <span>Cargar imagen</span>
      <input
        type="file"
        id="imagen"
        name="imagen"
        accept="image/*"
        hidden
      >
    </label>
  
    <div class="preview-container">
      <img
        id="preview"
        alt="Vista previa de la receta"
      >
    </div>
  </div>  

  <!-- Dificultad, tiempo y etiquetas -->
  <div class="form-row">
    <div class="form-group">
      <label for="dificultad" class="form-label">Dificultad (1–10)</label>
      <input type="number" step="0.1" min="1" max="10"
             class="form-control" id="dificultad" name="dificultad"
             placeholder="Ej: 5.0" required>
    </div>
    <div class="form-group">
      <label for="tiempo" class="form-label">Tiempo (min)</label>
      <input type="number" min="1" class="form-control" id="tiempo" name="tiempo"
             placeholder="Ej: 60" required>
    </div>
    <div class="form-group">
      <label for="etiquetas_input" class="form-label">Etiquetas</label>
      <input type="text" class="form-control" id="etiquetas_input"
             placeholder="Añade etiquetas">
      <input type="hidden" name="etiquetas" id="etiquetas">
    </div>
  </div>

  <!-- Ingredientes dinámicos -->
  <div class="form-group">
    <label class="form-label">Ingredientes</label>
    <div id="ingredientes-list">
      <div class="input-group mb-2">
        <input type="text" name="ingredientes" class="form-control"
               placeholder="Ej: 200 g de harina" required>
        <button type="button" class="btn btn-danger btn-eliminar-ing">×</button>
      </div>
    </div>
    <button type="button" id="btn-anadir-ing" class="btn btn-sm">
      + Añadir ingrediente
    </button>
  </div>

  <!-- Proceso -->
  <div class="form-group">
    <label for="proceso" class="form-label">Proceso de elaboración</label>
    <textarea class="form-control" id="proceso" name="proceso"
              rows="5"
              placeholder="Describe aquí paso a paso cómo preparar la receta"
              required></textarea>
  </div>

  <button type="submit" class="btn">Guardar receta</button>
</form>
{% endblock %}
